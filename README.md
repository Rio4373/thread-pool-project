# Курсовая работа: Реализация собственного пула потоков на Java

## Описание проекта

Целью данной курсовой работы является разработка собственного пула потоков на языке Java. Пул реализован **без использования стандартного `ThreadPoolExecutor`**, что обеспечивает полный контроль над:

- распределением задач,
- управлением очередями,
- логированием событий,
- обработкой отказов.

---

## Структура проекта

```plaintext
src/
└── executor/
    ├── CustomExecutor.java
    ├── CustomThreadPoolExecutor.java
    ├── Worker.java
    ├── TaskQueue.java
    ├── ThreadFactory.java
    ├── RejectedExecutionHandler.java
    └── Main.java
```
## Основные компоненты

### CustomExecutor
Интерфейс, определяющий базовые методы пула потоков:
```java
public interface CustomExecutor extends Executor {
    void execute(Runnable command);
    <T> Future<T> submit(Callable<T> callable);
    void shutdown();
    void shutdownNow();
}
```
Поддерживает выполнение задач как через execute(), так и через submit() с возвратом результата в виде Future.

### CustomThreadPoolExecutor
Реализация интерфейса CustomExecutor. Поддерживает следующие параметры:
- corePoolSize — минимальное количество потоков
- maxPoolSize — максимальное количество потоков
- keepAliveTime и timeUnit — время жизни простаивающих потоков
- queueSize — вместимость очереди задач
- minSpareThreads — минимальное число резервных потоков
Пул распределяет задачи по принципу Round Robin , равномерно нагружая рабочие потоки. В случае переполнения очереди и занятости всех потоков задача отклоняется.

### Worker
Класс, представляющий рабочий поток. Выполняет следующие функции:
- Обрабатывает задачи из закреплённой очереди
- Завершает работу при превышении времени бездействия (keepAliveTime)
- Проверяет статус пула перед выполнением задачи

### TaskQueue
Очередь задач, реализованная как обёртка над LinkedBlockingQueue. Предоставляет возможность ограничения вместимости и логирует события добавления и извлечения задач.

### ThreadFactory
Фабрика создания потоков. Присваивает каждому потоку уникальное имя и логирует факт его создания.

### RejectedExecutionHandler
Обработчик отклонённых задач. При невозможности принять новую задачу выводит сообщение о перегрузке системы.

### Main.java
Демонстрационная программа, запускающая тестовые задачи и проверяющая работу пула.

Пример инициализации пула:
```java
CustomThreadPoolExecutor executor = new CustomThreadPoolExecutor(2, 4, 5, TimeUnit.SECONDS, 5, 1);
```
Программа отправляет 15 задач, часть из которых вызывает перегрузку. После выполнения части задач вызывается метод shutdown(), который завершает работу пула.

## Логирование
Все ключевые события логируются в консоль. 

## Анализ производительности


| Параметр                    | Стандартный пул                        | Реализованный пул                                            |
|-----------------------------|----------------------------------------|---------------------------------------------------------------|
| Гибкость распределения задач | Round Robin только                     | Round Robin + возможна доработка до Least Loaded             |
| Настройка очередей          | Одна общая очередь                     | Несколько очередей                                           |
| Логирование                 | Отсутствует                            | Подробное логирование событий                                |
| Механизм отказа             | Используется Handler                   | Реализован свой, можно кастомизировать                       |
| Производительность          | Выше (оптимизация JVM)                 | Ниже (за счёт дополнительных проверок и синхронизации)       |

## Алгоритм распределения задач

В текущей реализации используется алгоритм Round Robin — задачи равномерно распределяются по всем доступным очередям. Это позволяет равномерно загружать потоки без сложных вычислений.

Алгоритм Least Loaded может быть реализован за счёт выбора очереди с наименьшим количеством задач, но требует дополнительной синхронизации и проверок.

## Вывод
Реализация собственного пула потоков полностью соответствует требованиям задания. Проект предоставляет:

- Гибкую настройку параметров
- Поддержку нескольких очередей
- Полное логирование событий
- Обработку отказанных задач
- Интерфейс, совместимый с Executor

Таким образом, проект готов к использованию в условиях высокой нагрузки, где важны детали управления потоками и распределения задач.

